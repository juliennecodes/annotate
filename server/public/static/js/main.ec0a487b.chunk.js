(this.webpackJsonpannotate=this.webpackJsonpannotate||[]).push([[0],{22:function(t,e,n){},23:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){},33:function(t,e,n){},34:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),s=n(16),i=n.n(s),o=n(8),r=n(2),l=(n(22),n(23),n(0));function j(){return Object(l.jsxs)("div",{className:"homepage-div",children:[Object(l.jsx)("h1",{className:"homepage-heading",children:"annotate"}),Object(l.jsx)(o.b,{className:"homepage-get-started",to:"/images",children:"get started"})]})}var u=n(3);function d(){return Object(l.jsx)("div",{style:{justifySelf:"center",alignSelf:"center"},children:Object(l.jsx)("p",{children:"Loading"})})}n(30),n(31);function h(t){var e=t.className,n=t.onClickCallback,a=t.size;return Object(l.jsxs)("svg",{className:e,onClick:n,xmlns:"http://www.w3.org/2000/svg",height:"".concat(a),viewBox:"0 0 24 24",width:"".concat(a),fill:"hsl(215, 66%, 40%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})]})}n(32);function m(t){var e=t.closeForm,n=t.setImages,c=Object(a.useState)(null),s=Object(u.a)(c,2),i=s[0],o=s[1],r=Object(a.useState)(null),j=Object(u.a)(r,2),d=j[0],m=j[1],b=function(t,a){var c={title:t,url:a};fetch("/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:c})}).then((function(t){fetch("/images").then((function(t){return t.json()})).then((function(t){e(),n(t.images)}))}))};return Object(l.jsxs)("div",{className:"add-image-form-div",children:[Object(l.jsx)(h,{className:"close-form-button",onClickCallback:e,size:24}),Object(l.jsx)("h1",{className:"add-image-form-heading",children:"Add New Image"}),Object(l.jsxs)("form",{className:"add-image-form","aria-label":"add-image-form",onSubmit:function(t){t.preventDefault(),b(i,d)},children:[Object(l.jsx)("label",{htmlFor:"title",children:"Title"}),Object(l.jsx)("input",{type:"text",id:"title","aria-label":"title-input",placeholder:"Title...",onChange:function(t){return o(t.target.value)}}),Object(l.jsx)("label",{htmlFor:"url",children:"Url"}),Object(l.jsx)("input",{type:"text",id:"url","aria-label":"url-input",placeholder:"Url...",onChange:function(t){return m(t.target.value)}}),Object(l.jsx)("button",{children:"Submit"})]})]})}function b(t){var e=t.closeForm,n=t.setImages;return Object(l.jsx)("div",{className:"new-image-modal",children:Object(l.jsx)("div",{className:"new-image-modal-card",children:Object(l.jsx)(m,{closeForm:e,setImages:n})})})}function g(t){var e=t.setImages,n=Object(a.useState)(!1),c=Object(u.a)(n,2),s=c[0],i=c[1];return Object(l.jsxs)("div",{className:"add-image-div",children:[s&&Object(l.jsx)(b,{closeForm:function(){return i(!1)},setImages:e}),Object(l.jsx)("button",{className:"add-image-button",onClick:function(){return i(!s)},children:"Add New Image "})]})}function O(){var t=Object(a.useState)(null),e=Object(u.a)(t,2),n=e[0],c=e[1];return Object(a.useEffect)((function(){fetch("/images").then((function(t){return t.json()})).then((function(t){return c(t.images)}))}),[]),n?Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"images-page",children:[Object(l.jsx)("h1",{className:"page-heading",style:{left:"-80px"},children:"Images Page"}),Object(l.jsx)("ul",{className:"image-thumbnails",children:n.map((function(t,e){return Object(l.jsx)(x,{image:t},e)}))}),Object(l.jsx)(g,{setImages:c})]})}):Object(l.jsx)(d,{})}function x(t){var e=t.image;return Object(l.jsx)("li",{children:Object(l.jsx)(o.b,{to:"/images/".concat(e.id),children:Object(l.jsx)("img",{className:"image-thumbnail",src:e.url,alt:e.title})})})}n(33);function f(){return Object(l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"hsl(215, 70%, 91%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"})]})}function v(t){var e=t.className,n=t.onClickCallback,a=t.size;return Object(l.jsxs)("svg",{className:e,onClick:n,xmlns:"http://www.w3.org/2000/svg",height:"".concat(a),viewBox:"0 0 24 24",width:"".concat(a),fill:"hsl(215, 66%, 40%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})]})}n(34);function p(t){var e=t.annotations,n=t.updateAnnotations,c=Object(a.useState)(e[e.length-1]),s=Object(u.a)(c,2),i=s[0],o=s[1];Object(a.useEffect)((function(){o(e[e.length-1])}),[e]);var r=function(){return Object(l.jsxs)("div",{className:"annotations-list-div",children:[Object(l.jsx)("h2",{children:"Annotations"}),Object(l.jsx)("ul",{className:"annotations-list",children:e.map((function(t,e){return Object(l.jsx)(j,{annotation:t,setCurrentAnnotation:o},e)}))})]})},j=function(t){var e=t.annotation;return Object(l.jsx)("li",{className:"annotation-list-item",onClick:function(){return o(e)},children:Object(l.jsx)(f,{})})},d=function(){var t=document.querySelector(".image").getBoundingClientRect();return Object(l.jsx)("img",{style:{width:t.width,height:t.height},className:"visual-annotation",src:i.visual,alt:"visual annotation"})},h=function(){return Object(l.jsxs)("div",{className:"written-annotation-div",children:[Object(l.jsx)(v,{className:"written-annotation-delete-button",onClickCallback:function(){fetch("/annotations/".concat(i.id),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(t){return n()}))},size:16}),Object(l.jsx)("p",{className:"written-annotation",children:i.written})]})};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(r,{}),i&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d,{}),Object(l.jsx)(h,{})]})]})}n(35);function w(t){var e=t.setCurrentColour;return Object(l.jsx)("ul",{className:"colour-swatches",children:["hsl(352, 100%, 65%)","hsl(41, 100%, 65%)","hsl(193, 72%, 63%)","hsl(0, 0%, 100%)","hsl(0, 0%, 50%)","hsl(0, 0%, 0%)"].map((function(t,n){return Object(l.jsx)("li",{className:0===n?"colour-swatch current-swatch":"colour-swatch",onClick:function(n){var a;e(t),a=n.target,document.querySelector(".current-swatch").classList.remove("current-swatch"),a.classList.add("current-swatch")},children:Object(l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:t,children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"})]})},n)}))})}function N(){var t=Object(a.useState)(!0),e=Object(u.a)(t,2),n=e[0],c=e[1],s=Object(a.useState)(!1),i=Object(u.a)(s,2),o=i[0],r=i[1],j=Object(a.useState)({x:0,y:0}),d=Object(u.a)(j,2),h=d[0],m=d[1],b=document.querySelector(".image").getBoundingClientRect(),g=b.width,O=b.height,x=Object(a.useState)("hsl(352, 100%, 65%)"),f=Object(u.a)(x,2),v=f[0],p=f[1],N=function(t){var e=t.clientX,n=t.clientY,a=document.querySelector(".canvas").getBoundingClientRect();return{x:e-a.x,y:n-a.y}},C=function(t){n&&(!function(){var t=document.querySelector(".canvas").getContext("2d");t.fillStyle=v,t.fillRect(h.x,h.y,3,3)}(),r(!0))},k=function(t){o&&function(t){var e=N(t),n=e.x,a=e.y,c=document.querySelector(".canvas").getContext("2d");c.beginPath(),c.strokeStyle=v,c.lineWidth=3,c.moveTo(h.x,h.y),c.lineTo(n,a),c.stroke(),c.closePath()}(t),m(N(t))};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"canvas-tools",children:[Object(l.jsxs)("div",{className:"tools",children:[Object(l.jsx)(S,{drawMode:n,setDrawMode:c}),Object(l.jsx)(y,{})]}),Object(l.jsx)(w,{setCurrentColour:p})]}),Object(l.jsx)("canvas",{className:"canvas",width:"".concat(g),height:"".concat(O),onMouseUp:function(){n&&r(!1)},onMouseDown:function(t){return C()},onMouseMove:function(t){return k(t)}})]})}function S(t){var e=t.drawMode,n=t.setDrawMode;return e?Object(l.jsxs)("svg",{className:"brush active-brush",onClick:function(){return n(!e)},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"})]}):Object(l.jsxs)("svg",{className:"brush",onClick:function(){return n(!e)},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"})]})}function y(){return Object(l.jsxs)("svg",{className:"clear-canvas",onClick:function(){return function(){var t=document.querySelector(".canvas"),e=t.getContext("2d"),n=t.getBoundingClientRect();e.clearRect(0,0,n.width,n.height)}()},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1z"})]})}n(36);function C(t){var e=t.image,n=t.setState,c=t.addIndicatorForCurrentStateSetter,s=t.updateAnnotations,i=Object(a.useState)(null),o=Object(u.a)(i,2),r=o[0],j=o[1],d=Object(a.useState)(null),h=Object(u.a)(d,2),m=h[0],b=h[1],g=function(){return Object(l.jsx)("button",{className:"set-visual-annotation-button",onClick:function(){var t=document.querySelector(".canvas").toDataURL();b(t)},children:"Set Image Annotation"})};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(N,{}),Object(l.jsxs)("div",{className:"annotate-form-div",children:[Object(l.jsx)("h2",{className:"annotate-form-heading",children:"Annotation Form"}),Object(l.jsx)(g,{}),Object(l.jsxs)("form",{className:"annotate-form","aria-label":"annotate-form",onSubmit:function(t){t.preventDefault(),function(t,a){var i={visual:t,written:a};fetch("/annotations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageId:e.id,annotation:i})}).then((function(t){s(),c(document.querySelector(".display-annotations-button")),n("display annotations")}))}(m,r)},children:[Object(l.jsx)("label",{htmlFor:"written-annotation-input",children:"Write New Annotation"}),Object(l.jsx)("textarea",{className:"annotate-form-textarea",type:"text",id:"written-annotation-input","aria-label":"written-annotation-input",onChange:function(t){return j(t.target.value)}}),Object(l.jsx)("button",{children:"Submit"})]})]})]})}n(37);function k(t){var e=t.image,n=Object(r.f)();return Object(l.jsx)("button",{className:"delete-image-button",onClick:function(){return t=e.id,void fetch("/images/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(t){return n.push("/images")}));var t},children:"Delete Image?"})}function M(t){var e=t.image;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"image-details",children:[Object(l.jsx)("p",{className:"image-details-title",children:e.title}),Object(l.jsx)("a",{className:"image-details-url",href:e.url,children:"Source Link"})]}),Object(l.jsx)(k,{image:e})]})}function z(){var t=Object(r.g)().id,e=Object(a.useState)(null),n=Object(u.a)(e,2),c=n[0],s=n[1],i=Object(a.useState)(null),o=Object(u.a)(i,2),j=o[0],h=o[1],m=Object(a.useState)("display image"),b=Object(u.a)(m,2),g=b[0],O=b[1];Object(a.useEffect)((function(){fetch("/images/".concat(t)).then((function(t){return t.json()})).then((function(t){s(t.image),h(t.annotations)}))}),[t]);var x=function(){fetch("/annotations?imageId=".concat(t)).then((function(t){return t.json()})).then((function(t){return h(t.annotations)}))};return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"image-page",children:[Object(l.jsx)("h1",{className:"page-heading",children:"Image Page"}),c?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(F,{setState:O}),c&&Object(l.jsx)(L,{image:c}),"display image details"===g&&Object(l.jsx)(M,{image:c}),"display annotations"===g&&Object(l.jsx)(p,{annotations:j,updateAnnotations:x}),"annotate"===g&&Object(l.jsx)(C,{image:c,updateAnnotations:x,setState:O,addIndicatorForCurrentStateSetter:A})]}):Object(l.jsx)(d,{})]})})}function L(t){var e=t.image;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("img",{className:"image center",src:e.url,alt:e.name})})}function F(t){var e=t.setState;return Object(l.jsxs)("ul",{className:"state-setters",children:[Object(l.jsx)("li",{role:"button",className:"active-state-setter",onClick:function(t){e("display image"),document.querySelector(".image").classList.add("center"),A(t.target)},children:"Display Image"}),Object(l.jsx)("li",{role:"button",onClick:function(t){e("display image details"),I(),A(t.target)},children:"Display Image Details"}),Object(l.jsx)("li",{role:"button",className:"display-annotations-button",onClick:function(t){e("display annotations"),I(),A(t.target)},children:"Display Annotations"}),Object(l.jsx)("li",{role:"button",onClick:function(t){e("annotate"),I(),A(t.target)},children:"Annotate"})]})}function I(){document.querySelector(".image").classList.remove("center")}function A(t){document.querySelector(".active-state-setter").classList.remove("active-state-setter"),t.classList.add("active-state-setter")}var D=function(){return Object(l.jsx)("main",{className:"App",children:Object(l.jsx)(o.a,{children:Object(l.jsxs)(r.c,{children:[Object(l.jsx)(r.a,{exact:!0,path:"/",component:j}),Object(l.jsx)(r.a,{exact:!0,path:"/images",component:O}),Object(l.jsx)(r.a,{exact:!0,path:"/images/:id",component:z})]})})})};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(D,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.ec0a487b.chunk.js.map