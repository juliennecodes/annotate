(this.webpackJsonpannotate=this.webpackJsonpannotate||[]).push([[0],{22:function(t,e,n){},23:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){},33:function(t,e,n){},34:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),s=n(16),i=n.n(s),o=n(8),r=n(2),l=(n(22),n(23),n(0));function j(){return Object(l.jsxs)("div",{className:"homepage-div",children:[Object(l.jsx)("h1",{className:"homepage-heading",children:"annotate"}),Object(l.jsx)(o.b,{className:"homepage-get-started",to:"/images",children:"get started"})]})}var u=n(3);function d(){return Object(l.jsx)("div",{style:{justifySelf:"center",alignSelf:"center"},children:Object(l.jsx)("p",{children:"Loading"})})}n(30),n(31),n(32);function h(t){var e=t.closeForm,n=t.setImages,c=Object(a.useState)(null),s=Object(u.a)(c,2),i=s[0],o=s[1],r=Object(a.useState)(null),j=Object(u.a)(r,2),d=j[0],h=j[1],m=function(t,a){var c={name:t,url:a};fetch("/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:c})}).then((function(t){fetch("/images").then((function(t){return t.json()})).then((function(t){e(),n(t.images)}))}))};return Object(l.jsxs)("div",{className:"add-image-form-div",children:[Object(l.jsxs)("svg",{className:"close-form-button",onClick:e,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"hsl(215, 66%, 40%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})]}),Object(l.jsx)("h1",{className:"add-image-form-heading",children:"Add New Image"}),Object(l.jsxs)("form",{className:"add-image-form","aria-label":"add-image-form",onSubmit:function(t){t.preventDefault(),m(i,d)},children:[Object(l.jsx)("label",{htmlFor:"name",children:"Name"}),Object(l.jsx)("input",{type:"text",id:"name","aria-label":"name-input",placeholder:"Name...",onChange:function(t){return o(t.target.value)}}),Object(l.jsx)("label",{htmlFor:"url",children:"Url"}),Object(l.jsx)("input",{type:"text",id:"url","aria-label":"url-input",placeholder:"Url...",onChange:function(t){return h(t.target.value)}}),Object(l.jsx)("button",{children:"Submit"})]})]})}function m(t){var e=t.closeForm,n=t.setImages;return Object(l.jsx)("div",{className:"new-image-modal",children:Object(l.jsx)("div",{className:"new-image-modal-card",children:Object(l.jsx)(h,{closeForm:e,setImages:n})})})}function b(t){var e=t.setImages,n=Object(a.useState)(!1),c=Object(u.a)(n,2),s=c[0],i=c[1];return Object(l.jsxs)("div",{className:"add-image-div",children:[s&&Object(l.jsx)(m,{closeForm:function(){return i(!1)},setImages:e}),Object(l.jsx)("button",{className:"add-image-button",onClick:function(){return i(!s)},children:"Add New Image "})]})}function g(){var t=Object(a.useState)(null),e=Object(u.a)(t,2),n=e[0],c=e[1];return Object(a.useEffect)((function(){fetch("/images").then((function(t){return t.json()})).then((function(t){return c(t.images)}))}),[]),n?Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"images-page",children:[Object(l.jsx)("h1",{className:"page-heading",style:{left:"-80px"},children:"Images Page"}),Object(l.jsx)("ul",{className:"image-thumbnails",children:n.map((function(t,e){return Object(l.jsx)(O,{image:t},e)}))}),Object(l.jsx)(b,{setImages:c})]})}):Object(l.jsx)(d,{})}function O(t){var e=t.image;return Object(l.jsx)("li",{children:Object(l.jsx)(o.b,{to:"/images/".concat(e.id),children:Object(l.jsx)("img",{className:"image-thumbnail",src:e.url,alt:e.name})})})}n(33),n(34);function x(t){var e=t.image,n=(t.setState,Object(a.useState)(null)),c=Object(u.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(null),r=Object(u.a)(o,2),j=r[0],h=r[1];Object(a.useEffect)((function(){fetch("/images/".concat(e.id,"/annotations")).then((function(t){return t.json()})).then((function(t){i(t.annotations),h(t.annotations[t.annotations.length-1])}))}),[e]);var m=function(){return Object(l.jsxs)("div",{className:"annotations-list-div",children:[Object(l.jsx)("h2",{children:"Annotations"}),Object(l.jsx)("ul",{className:"annotations-list",children:s.map((function(t,e){return Object(l.jsx)(b,{annotation:t,setCurrentAnnotation:h},e)}))})]})},b=function(t){var e=t.annotation;return Object(l.jsx)("li",{className:"annotation-list-item",onClick:function(){return h(e)},children:Object(l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"hsl(215, 70%, 91%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"})]})})},g=function(){var t=document.querySelector(".image").getBoundingClientRect();return Object(l.jsx)("img",{style:{width:t.width,height:t.height},className:"visual-annotation",src:j.visual,alt:"visual annotation"})},O=function(){return Object(l.jsxs)("div",{className:"written-annotation-div",children:[Object(l.jsx)("p",{className:"written-annotation",children:j.written}),Object(l.jsxs)("svg",{className:"written-annotation-delete-button",onClick:function(){return t=j,void fetch("/images/".concat(t.image_id,"/annotations/").concat(t.id),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(t){return window.location.reload()}));var t},xmlns:"http://www.w3.org/2000/svg",height:"16",viewBox:"0 0 24 24",width:"16",fill:"hsl(215, 66%, 40%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})]})]})};return s?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(m,{}),j&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(g,{}),Object(l.jsx)(O,{})]})]}):Object(l.jsx)(d,{})}n(35);function f(t){var e=t.setCurrentColour;return Object(l.jsx)("ul",{className:"colour-swatches",children:["hsl(352, 100%, 65%)","hsl(41, 100%, 65%)","hsl(193, 72%, 63%)","hsl(0, 0%, 100%)","hsl(0, 0%, 50%)","hsl(0, 0%, 0%)"].map((function(t,n){return Object(l.jsx)("li",{className:0===n?"colour-swatch current-swatch":"colour-swatch",onClick:function(n){var a;e(t),a=n.target,document.querySelector(".current-swatch").classList.remove("current-swatch"),a.classList.add("current-swatch")},children:Object(l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:t,children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"})]})},n)}))})}function v(){var t=Object(a.useState)(!0),e=Object(u.a)(t,2),n=e[0],c=e[1],s=Object(a.useState)(!1),i=Object(u.a)(s,2),o=i[0],r=i[1],j=Object(a.useState)({x:0,y:0}),d=Object(u.a)(j,2),h=d[0],m=d[1],b=document.querySelector(".image").getBoundingClientRect(),g=b.width,O=b.height,x=Object(a.useState)("hsl(352, 100%, 65%)"),v=Object(u.a)(x,2),N=v[0],S=v[1],y=function(t){var e=t.clientX,n=t.clientY,a=document.querySelector(".canvas").getBoundingClientRect();return{x:e-a.x,y:n-a.y}},C=function(t){n&&(!function(){var t=document.querySelector(".canvas").getContext("2d");t.fillStyle=N,t.fillRect(h.x,h.y,3,3)}(),r(!0))},M=function(t){o&&function(t){var e=y(t),n=e.x,a=e.y,c=document.querySelector(".canvas").getContext("2d");c.beginPath(),c.strokeStyle=N,c.lineWidth=3,c.moveTo(h.x,h.y),c.lineTo(n,a),c.stroke(),c.closePath()}(t),m(y(t))};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"canvas-tools",children:[Object(l.jsxs)("div",{className:"tools",children:[Object(l.jsx)(p,{drawMode:n,setDrawMode:c}),Object(l.jsx)(w,{})]}),Object(l.jsx)(f,{setCurrentColour:S})]}),Object(l.jsx)("canvas",{className:"canvas",width:"".concat(g),height:"".concat(O),onMouseUp:function(){n&&r(!1)},onMouseDown:function(t){return C()},onMouseMove:function(t){return M(t)}})]})}function p(t){var e=t.drawMode,n=t.setDrawMode;return e?Object(l.jsxs)("svg",{className:"brush active-brush",onClick:function(){return n(!e)},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"})]}):Object(l.jsxs)("svg",{className:"brush",onClick:function(){return n(!e)},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"})]})}function w(){return Object(l.jsxs)("svg",{className:"clear-canvas",onClick:function(){return function(){var t=document.querySelector(".canvas"),e=t.getContext("2d"),n=t.getBoundingClientRect();e.clearRect(0,0,n.width,n.height)}()},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1z"})]})}n(36);function N(t){var e=t.image,n=t.setState,c=t.addIndicatorForCurrentStateSetter,s=Object(a.useState)(null),i=Object(u.a)(s,2),o=i[0],r=i[1],j=Object(a.useState)(null),d=Object(u.a)(j,2),h=d[0],m=d[1],b=function(){return Object(l.jsx)("button",{className:"set-visual-annotation-button",onClick:function(){var t=document.querySelector(".canvas").toDataURL();m(t)},children:"Set Image Annotation"})};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(v,{}),Object(l.jsxs)("div",{className:"annotate-form-div",children:[Object(l.jsx)("h2",{className:"annotate-form-heading",children:"Annotation Form"}),Object(l.jsx)(b,{}),Object(l.jsxs)("form",{className:"annotate-form","aria-label":"annotate-form",onSubmit:function(t){t.preventDefault(),function(t,a){var s={visual:t,written:a};fetch("/images/".concat(e.id,"/annotations"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({annotation:s})}).then((function(t){c(document.querySelector(".display-annotations-button")),n("display annotations")}))}(h,o)},children:[Object(l.jsx)("label",{htmlFor:"written-annotation-input",children:"Write New Annotation"}),Object(l.jsx)("textarea",{className:"annotate-form-textarea",type:"text",id:"written-annotation-input","aria-label":"written-annotation-input",onChange:function(t){return r(t.target.value)}}),Object(l.jsx)("button",{children:"Submit"})]})]})]})}n(37);function S(t){var e=t.image,n=Object(r.f)();return Object(l.jsx)("button",{className:"delete-image-button",onClick:function(){return t=e.id,void fetch("/images/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(t){return n.push("/images")}));var t},children:"Delete Image?"})}function y(t){var e=t.image;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"image-details",children:[Object(l.jsx)("p",{className:"image-details-title",children:e.name}),Object(l.jsx)("a",{className:"image-details-url",href:e.url,children:"Source Link"})]}),Object(l.jsx)(S,{image:e})]})}function C(){var t=Object(r.g)().id,e=Object(a.useState)(null),n=Object(u.a)(e,2),c=n[0],s=n[1],i=Object(a.useState)("display image"),o=Object(u.a)(i,2),j=o[0],h=o[1];return Object(a.useEffect)((function(){fetch("/images/".concat(t)).then((function(t){return t.json()})).then((function(t){return s(t.image)}))}),[t]),Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"image-page",children:[Object(l.jsx)("h1",{className:"page-heading",children:"Image Page"}),c?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(L,{setState:h}),c&&Object(l.jsx)(M,{image:c}),"display image details"===j&&Object(l.jsx)(y,{image:c}),"display annotations"===j&&Object(l.jsx)(x,{image:c,setState:h}),"annotate"===j&&Object(l.jsx)(N,{image:c,setState:h,addIndicatorForCurrentStateSetter:F})]}):Object(l.jsx)(d,{})]})})}function M(t){var e=t.image;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("img",{className:"image center",src:e.url,alt:e.name})})}function L(t){var e=t.setState;return Object(l.jsxs)("ul",{className:"state-setters",children:[Object(l.jsx)("li",{className:"active-state-setter",onClick:function(t){e("display image"),document.querySelector(".image").classList.add("center"),F(t.target)},children:"Display Image"}),Object(l.jsx)("li",{onClick:function(t){e("display image details"),k(),F(t.target)},children:"Display Image Details"}),Object(l.jsx)("li",{className:"display-annotations-button",onClick:function(t){e("display annotations"),k(),F(t.target)},children:"Display Annotations"}),Object(l.jsx)("li",{onClick:function(t){e("annotate"),k(),F(t.target)},children:"Annotate"})]})}function k(){document.querySelector(".image").classList.remove("center")}function F(t){document.querySelector(".active-state-setter").classList.remove("active-state-setter"),t.classList.add("active-state-setter")}var z=function(){return Object(l.jsx)("main",{className:"App",children:Object(l.jsx)(o.a,{children:Object(l.jsxs)(r.c,{children:[Object(l.jsx)(r.a,{exact:!0,path:"/",component:j}),Object(l.jsx)(r.a,{exact:!0,path:"/images",component:g}),Object(l.jsx)(r.a,{exact:!0,path:"/images/:id",component:C})]})})})};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(z,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.4182ade2.chunk.js.map