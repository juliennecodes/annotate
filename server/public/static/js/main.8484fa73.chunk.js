(this.webpackJsonpannotate=this.webpackJsonpannotate||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(16),s=n.n(i),o=n(8),r=n(2),l=(n(22),n(23),n(0));function j(){return Object(l.jsxs)("div",{className:"homepage-div",children:[Object(l.jsx)("h1",{className:"homepage-heading",children:"annotate"}),Object(l.jsx)(o.b,{className:"homepage-get-started",to:"/images",children:"get started"})]})}var u=n(3);function h(){return Object(l.jsx)("div",{children:Object(l.jsx)("p",{children:"Loading"})})}n(30);function m(){return Object(l.jsx)("nav",{className:"navigation",children:Object(l.jsxs)("ul",{className:"navigation-links",children:[Object(l.jsx)("li",{children:Object(l.jsx)(o.c,{exact:!0,to:"/",className:"navigation-link",children:"Homepage"})}),Object(l.jsx)("li",{children:Object(l.jsx)(o.c,{to:"/images",className:"navigation-link",children:"Images"})})]})})}n(31),n(32);function d(e){var t=e.closeForm,n=Object(a.useState)(null),c=Object(u.a)(n,2),i=c[0],s=c[1],o=Object(a.useState)(null),r=Object(u.a)(o,2),j=r[0],h=r[1];return Object(l.jsxs)("div",{className:"add-image-form-div",children:[Object(l.jsxs)("svg",{className:"close-form-button",onClick:t,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})]}),Object(l.jsx)("h1",{className:"add-image-form-heading",children:"Add New Image"}),Object(l.jsxs)("form",{className:"add-image-form","aria-label":"add-image-form",onSubmit:function(e){e.preventDefault(),function(e,t){var n={name:e,url:t};fetch("/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:n})}).then((function(e){return window.location.reload()}))}(i,j)},children:[Object(l.jsx)("label",{htmlFor:"name",children:"Name"}),Object(l.jsx)("input",{type:"text",id:"name","aria-label":"name-input",placeholder:"Name...",onChange:function(e){return s(e.target.value)}}),Object(l.jsx)("label",{htmlFor:"url",children:"Url"}),Object(l.jsx)("input",{type:"text",id:"url","aria-label":"url-input",placeholder:"Url...",onChange:function(e){return h(e.target.value)}}),Object(l.jsx)("button",{children:"Submit"})]})]})}function b(e){var t=e.closeForm;return Object(l.jsx)("div",{className:"new-image-modal",children:Object(l.jsx)("div",{className:"new-image-modal-card",children:Object(l.jsx)(d,{closeForm:t})})})}function g(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(l.jsxs)("div",{className:"add-image-div",children:[n&&Object(l.jsx)(b,{closeForm:function(){return c(!1)}}),Object(l.jsx)("p",{role:"button",className:"add-image-button",onClick:function(){return c(!n)},children:"Add new image"})]})}n(33);function x(){return Object(l.jsxs)("header",{className:"header",children:[Object(l.jsx)(m,{}),Object(l.jsx)(g,{})]})}function O(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){fetch("/images").then((function(e){return e.json()})).then((function(e){return c(e.images)}))}),[]),n?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{}),Object(l.jsx)("main",{className:"main",children:Object(l.jsx)("div",{className:"images-page",children:Object(l.jsx)("ul",{className:"image-thumbnails",children:n.map((function(e,t){return Object(l.jsx)(v,{image:e},t)}))})})})]}):Object(l.jsx)(h,{})}function v(e){var t=e.image;return Object(l.jsx)("li",{children:Object(l.jsx)(o.b,{to:"/images/".concat(t.id),children:Object(l.jsx)("img",{className:"image-thumbnail",src:t.url,alt:t.name})})})}n(34),n(35);function f(e){var t=e.image,n=e.setState,c=Object(a.useState)(null),i=Object(u.a)(c,2),s=i[0],o=i[1],r=Object(a.useState)(null),j=Object(u.a)(r,2),m=j[0],d=j[1];Object(a.useEffect)((function(){fetch("/images/".concat(t.id,"/annotations")).then((function(e){return e.json()})).then((function(e){return o(e.annotations)}))}),[t]);var b=function(){return Object(l.jsxs)("div",{className:"annotations-list-div",children:[Object(l.jsx)("h2",{children:"Annotations"}),Object(l.jsx)("ul",{className:"annotations-list",children:s.map((function(e,t){return Object(l.jsx)(g,{annotation:e,setCurrentAnnotation:d},t)}))})]})},g=function(e){var t=e.annotation;return Object(l.jsx)("li",{className:"annotation-list-item",onClick:function(){return d(t)},children:Object(l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"hsl(211, 25%, 84%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"})]})})},x=function(){var e=document.querySelector(".image").getBoundingClientRect();return Object(l.jsx)("img",{style:{width:e.width,height:e.height},className:"visual-annotation",src:m.visual,alt:"visual annotation"})},O=function(){return Object(l.jsxs)("div",{className:"written-annotation-div",children:[Object(l.jsx)("p",{className:"written-annotation",children:m.written}),Object(l.jsxs)("svg",{className:"written-annotation-delete-button",onClick:function(){return e=m,void fetch("/images/".concat(e.image_id,"/annotations/").concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return window.location.reload()}));var e},xmlns:"http://www.w3.org/2000/svg",height:"16",viewBox:"0 0 24 24",width:"16",fill:"hsl(218, 23%, 23%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})]})]})},v=function(){return Object(l.jsxs)("svg",{className:"close-view-annotations",onClick:function(){return n("viewing image")},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"hsl(218, 23%, 23%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})]})};return s?Object(l.jsxs)(l.Fragment,{children:[m&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{}),Object(l.jsx)(O,{})]}),Object(l.jsx)(b,{}),Object(l.jsx)(v,{})]}):Object(l.jsx)(h,{})}n(36);function w(e){var t=e.setCurrentColour;return Object(l.jsxs)("div",{className:"colour-choices",children:[Object(l.jsxs)("svg",{onClick:function(){return t("hsl(0, 0%, 100%)")},className:"colour-choice",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"hsl(0, 0%, 100%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"})]}),Object(l.jsxs)("svg",{onClick:function(){return t("hsl(0, 0%, 50%)")},className:"colour-choice",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"hsl(0, 0%, 50%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"})]}),Object(l.jsxs)("svg",{onClick:function(){return t("hsl(0, 0%, 0%)")},className:"colour-choice",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"hsl(0, 0%, 0%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"})]})]})}function p(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),s=Object(u.a)(i,2),o=s[0],r=s[1],j=Object(a.useState)({x:0,y:0}),h=Object(u.a)(j,2),m=h[0],d=h[1],b=document.querySelector(".image").getBoundingClientRect(),g=b.width,x=b.height,O=Object(a.useState)("hsl(0, 0%, 0%)"),v=Object(u.a)(O,2),f=v[0],p=v[1],S=function(e){var t=e.clientX,n=e.clientY,a=document.querySelector(".canvas").getBoundingClientRect();return{x:t-a.x,y:n-a.y}},M=function(e){n&&(document.querySelector(".canvas").getContext("2d").fillRect(m.x,m.y,3,3),r(!0))},k=function(e){o&&function(e){var t=S(e),n=t.x,a=t.y,c=document.querySelector(".canvas").getContext("2d");c.beginPath(),c.strokeStyle=f,c.lineWidth=3,c.moveTo(m.x,m.y),c.lineTo(n,a),c.stroke(),c.closePath()}(e),d(S(e))};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"canvas-tools",children:[Object(l.jsx)(N,{drawMode:n,setDrawMode:c}),Object(l.jsx)(C,{}),Object(l.jsx)(w,{setCurrentColour:p})]}),Object(l.jsx)("canvas",{className:"canvas",width:"".concat(g),height:"".concat(x),onMouseUp:function(){n&&r(!1)},onMouseDown:function(e){return M()},onMouseMove:function(e){return k(e)}})]})}function N(e){var t=e.drawMode,n=e.setDrawMode;return t?Object(l.jsxs)("svg",{className:"brush active-brush",onClick:function(){return n(!t)},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"})]}):Object(l.jsxs)("svg",{className:"brush",onClick:function(){return n(!t)},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"})]})}function C(){return Object(l.jsxs)("svg",{className:"clear-canvas",onClick:function(){return function(){var e=document.querySelector(".canvas"),t=e.getContext("2d"),n=e.getBoundingClientRect();t.clearRect(0,0,n.width,n.height)}()},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1z"})]})}n(37);function S(e){var t=e.image,n=e.setState,c=Object(a.useState)(null),i=Object(u.a)(c,2),s=i[0],o=i[1],r=Object(a.useState)(null),j=Object(u.a)(r,2),h=j[0],m=j[1],d=function(){return Object(l.jsx)("button",{className:"set-visual-annotation-button",onClick:function(){var e=document.querySelector(".canvas").toDataURL();m(e)},children:"Set Image Annotation"})},b=function(){return Object(l.jsxs)("svg",{className:"close-annotate",onClick:function(){return n("viewing image")},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"hsl(218, 23%, 23%)",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})]})};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(p,{}),Object(l.jsxs)("div",{className:"annotation-form-div",children:[Object(l.jsx)("h2",{className:"annotation-form-heading",children:"Annotation Form"}),Object(l.jsx)(d,{}),Object(l.jsxs)("form",{className:"annotate-form","aria-label":"annotate-form",onSubmit:function(e){e.preventDefault(),function(e,n){var a={visual:e,written:n};fetch("/images/".concat(t.id,"/annotations"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({annotation:a})}).then((function(e){return window.location.reload()}))}(h,s)},children:[Object(l.jsx)("label",{htmlFor:"annotation",children:"Write New Annotation"}),Object(l.jsx)("textarea",{className:"annotate-form-textarea",type:"text",id:"annotation","aria-label":"annotation-input",onChange:function(e){return o(e.target.value)}}),Object(l.jsx)("button",{children:"Submit"})]})]}),Object(l.jsx)(b,{})]})}function M(e){var t=e.image,n=Object(r.f)();return Object(l.jsxs)("svg",{className:"delete-image-button",onClick:function(){return e=t.id,void fetch("/images/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return n.push("/images")}));var e},xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(l.jsx)("path",{d:"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})]})}function k(e){var t=e.image;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("img",{className:"image",src:t.url,alt:t.name})})}function y(e){var t=e.state,n=e.setState,a=function(){return Object(l.jsx)("div",{className:"image-page-state-setters-div",children:Object(l.jsxs)("ul",{className:"image-page-state-setters",children:[Object(l.jsx)("li",{role:"button",className:"view-image-button image-page-state-setter current-state",onClick:function(){return n("viewing image")},children:"View image"}),Object(l.jsx)("li",{role:"button",className:"view-annotations-button image-page-state-setter",onClick:function(){return n("viewing annotations")},children:"Display annotations"}),Object(l.jsx)("li",{role:"button",className:"annotate-button image-page-state-setter",onClick:function(){return n("annotate mode")},children:"Annotate"})]})})},c=function(){return Object(l.jsx)("div",{className:"image-page-state-setters-div",children:Object(l.jsxs)("ul",{className:"image-page-state-setters",children:[Object(l.jsx)("li",{role:"button",className:"view-image-button image-page-state-setter",onClick:function(){return n("viewing image")},children:"View image"}),Object(l.jsx)("li",{role:"button",className:"view-annotations-button image-page-state-setter current-state",onClick:function(){return n("viewing annotations")},children:"Display annotations"}),Object(l.jsx)("li",{role:"button",className:"annotate-button image-page-state-setter",onClick:function(){return n("annotate mode")},children:"Annotate"})]})})},i=function(){return Object(l.jsx)("div",{className:"image-page-state-setters-div",children:Object(l.jsxs)("ul",{className:"image-page-state-setters",children:[Object(l.jsx)("li",{role:"button",className:"view-image-button image-page-state-setter",onClick:function(){return n("viewing image")},children:"View image"}),Object(l.jsx)("li",{role:"button",className:"view-annotations-button image-page-state-setter",onClick:function(){return n("viewing annotations")},children:"Display annotations"}),Object(l.jsx)("li",{role:"button",className:"annotate-button image-page-state-setter current-state",onClick:function(){return n("annotate mode")},children:"Annotate"})]})})};return Object(l.jsxs)(l.Fragment,{children:["viewing image"===t&&Object(l.jsx)(a,{}),"viewing annotations"===t&&Object(l.jsx)(c,{}),"annotate mode"===t&&Object(l.jsx)(i,{})]})}function z(){var e=Object(a.useState)("viewing image"),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(null),s=Object(u.a)(i,2),o=s[0],j=s[1],m=Object(r.g)().id;Object(a.useEffect)((function(){fetch("/images/".concat(m)).then((function(e){return e.json()})).then((function(e){return j(e.image)}))}),[m]);var d=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{}),Object(l.jsx)("main",{className:"main",children:Object(l.jsxs)("div",{className:"image-page image-page-view-image",children:[Object(l.jsx)(y,{state:n,setState:c}),Object(l.jsxs)("div",{className:"image-page-content",children:[Object(l.jsx)(k,{image:o}),Object(l.jsx)(M,{image:o})]})]})})]})},b=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{}),Object(l.jsx)("main",{className:"main",children:Object(l.jsxs)("div",{className:"image-page image-page-view-annotations",children:[Object(l.jsx)(y,{state:n,setState:c}),Object(l.jsxs)("div",{className:"image-page-content",children:[Object(l.jsx)(k,{image:o}),Object(l.jsx)(f,{image:o,setState:c})]})]})})]})},g=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{}),Object(l.jsx)("main",{className:"main",children:Object(l.jsxs)("div",{className:"image-page image-page-annotate",children:[Object(l.jsx)(y,{state:n,setState:c}),Object(l.jsxs)("div",{className:"image-page-content",children:[Object(l.jsx)(k,{image:o}),Object(l.jsx)(S,{image:o,setState:c})]})]})})]})};return o?Object(l.jsxs)(l.Fragment,{children:["viewing image"===n&&Object(l.jsx)(d,{}),"viewing annotations"===n&&Object(l.jsx)(b,{}),"annotate mode"===n&&Object(l.jsx)(g,{})]}):Object(l.jsx)(h,{})}var L=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(o.a,{children:Object(l.jsxs)(r.c,{children:[Object(l.jsx)(r.a,{exact:!0,path:"/",component:j}),Object(l.jsx)(r.a,{exact:!0,path:"/images",component:O}),Object(l.jsx)(r.a,{exact:!0,path:"/images/:id",component:z})]})})})};s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(L,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.8484fa73.chunk.js.map